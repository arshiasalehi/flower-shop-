import{c as U,j as s,r as y,D as B,B as w,u as M,d as T,e as H,p as V}from"./index-DAciTiRn.js";import{P as _}from"./ProductCard-BfmmPWq-.js";import{B as K}from"./Breadcrumbs-BUhBNYpJ.js";import{S as Q}from"./Seo-D0cgoG70.js";import"./Badge-C3mMzFNq.js";const u={query:"",priceRange:[0,500],colors:[],sizes:[],delivery:[],availability:["in-stock"],rating:0,onSaleOnly:!1,tags:[],sort:"featured",page:1,perPage:20},G=(e,t)=>{switch(t){case"price-asc":return[...e].sort((r,n)=>r.price-n.price);case"price-desc":return[...e].sort((r,n)=>n.price-r.price);case"newest":return[...e].sort((r,n)=>new Date(n.createdAt).getTime()-new Date(r.createdAt).getTime());case"best-rated":return[...e].sort((r,n)=>n.rating-r.rating);case"popular":return[...e].sort((r,n)=>n.popularity-r.popularity);default:return[...e].sort((r,n)=>n.popularity-r.popularity)}},J=(e,t)=>{const[r,n]=t.priceRange,a=t.query.trim().toLowerCase();return e.filter(i=>!(t.category&&!i.categories.includes(t.category)||t.occasion&&!i.occasions.includes(t.occasion)||t.onSaleOnly&&!i.isOnSale||t.colors.length&&!t.colors.some(c=>i.colors.includes(c))||t.sizes.length&&!t.sizes.includes(i.size)||t.delivery.length&&!t.delivery.some(c=>i.deliveryOptions.includes(c))||t.availability.length&&!t.availability.includes(i.availability)||t.rating&&i.rating<t.rating||t.tags.length&&!t.tags.some(c=>i.tags.includes(c))||i.price<r||i.price>n||a&&!(i.title.toLowerCase().includes(a)||i.description.toLowerCase().includes(a))))},W=(e,t,r)=>{const n=(t-1)*r;return e.slice(n,n+r)},P="%[a-f0-9]{2}",S=new RegExp("("+P+")|([^%]+?)","gi"),C=new RegExp("("+P+")+","gi");function h(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],h(r),h(n))}function X(e){try{return decodeURIComponent(e)}catch{let t=e.match(S)||[];for(let r=1;r<t.length;r++)e=h(t,r).join(""),t=e.match(S)||[];return e}}function Y(e){const t={"%FE%FF":"��","%FF%FE":"��"};let r=C.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const a=X(r[0]);a!==r[0]&&(t[r[0]]=a)}r=C.exec(e)}t["%C2"]="�";const n=Object.keys(t);for(const a of n)e=e.replace(new RegExp(a,"g"),t[a]);return e}function Z(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return Y(e)}}function ee(e,t){const r={};if(Array.isArray(t))for(const n of t){const a=Object.getOwnPropertyDescriptor(e,n);a!=null&&a.enumerable&&Object.defineProperty(r,n,a)}else for(const n of Reflect.ownKeys(e)){const a=Object.getOwnPropertyDescriptor(e,n);if(a.enumerable){const i=e[n];t(n,i,e)&&Object.defineProperty(r,n,a)}}return r}function A(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}const re=e=>e==null,te=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),b=Symbol("encodeFragmentIdentifier");function ne(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const a=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[o(t,e),"[",a,"]"].join("")]:[...r,[o(t,e),"[",o(a,e),"]=",o(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[o(t,e),"[]"].join("")]:[...r,[o(t,e),"[]=",o(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[o(t,e),":list="].join("")]:[...r,[o(t,e),":list=",o(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,a)=>a===void 0||e.skipNull&&a===null||e.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[o(r,e),t,o(a,e)].join("")]:[[n,o(a,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,o(t,e)]:[...r,[o(t,e),"=",o(n,e)].join("")]}}function ae(e){let t;switch(e.arrayFormat){case"index":return(r,n,a)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){a[r]=n;return}a[r]===void 0&&(a[r]={}),a[r][t[1]]=n};case"bracket":return(r,n,a)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){a[r]=n;return}if(a[r]===void 0){a[r]=[n];return}a[r]=[...a[r],n]};case"colon-list-separator":return(r,n,a)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){a[r]=n;return}if(a[r]===void 0){a[r]=[n];return}a[r]=[...a[r],n]};case"comma":case"separator":return(r,n,a)=>{const c=typeof n=="string"&&n.includes(e.arrayFormatSeparator)?n.split(e.arrayFormatSeparator).map(l=>g(l,e)):n===null?n:g(n,e);a[r]=c};case"bracket-separator":return(r,n,a)=>{const i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){a[r]=n&&g(n,e);return}const c=n===null?[]:g(n,e).split(e.arrayFormatSeparator);if(a[r]===void 0){a[r]=c;return}a[r]=[...a[r],...c]};default:return(r,n,a)=>{if(a[r]===void 0){a[r]=n;return}a[r]=[...[a[r]].flat(),n]}}}function R(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?te(e):encodeURIComponent(e):e}function g(e,t){return t.decode?Z(e):e}function E(e){return Array.isArray(e)?e.sort():typeof e=="object"?E(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function $(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function se(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function k(e,t,r){return r==="string"&&typeof e=="string"?e:typeof r=="function"&&typeof e=="string"?r(e):r==="boolean"&&e===null?!0:r==="boolean"&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":r==="boolean"&&e!==null&&(e.toLowerCase()==="1"||e.toLowerCase()==="0")?e.toLowerCase()==="1":r==="string[]"&&t.arrayFormat!=="none"&&typeof e=="string"?[e]:r==="number[]"&&t.arrayFormat!=="none"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?[Number(e)]:r==="number"&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")?e.toLowerCase()==="true":t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?Number(e):e}function j(e){e=$(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function N(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...t},R(t.arrayFormatSeparator);const r=ae(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const a of e.split("&")){if(a==="")continue;const i=t.decode?a.replaceAll("+"," "):a;let[c,l]=A(i,"=");c===void 0&&(c=i),l=l===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?l:g(l,t),r(g(c,t),l,n)}for(const[a,i]of Object.entries(n))if(typeof i=="object"&&i!==null&&t.types[a]!=="string")for(const[c,l]of Object.entries(i)){const f=t.types[a],m=typeof f=="function"?f:f?f.replace("[]",""):void 0;i[c]=k(l,t,m)}else typeof i=="object"&&i!==null&&t.types[a]==="string"?n[a]=Object.values(i).join(t.arrayFormatSeparator):n[a]=k(i,t,t.types[a]);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((a,i)=>{const c=n[i];return a[i]=c&&typeof c=="object"&&!Array.isArray(c)?E(c):c,a},Object.create(null))}function L(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},R(t.arrayFormatSeparator);const r=c=>t.skipNull&&re(e[c])||t.skipEmptyString&&e[c]==="",n=ne(t),a={};for(const[c,l]of Object.entries(e))r(c)||(a[c]=l);const i=Object.keys(a);return t.sort!==!1&&i.sort(t.sort),i.map(c=>{let l=e[c];if(t.replacer&&(l=t.replacer(c,l),l===void 0)||l===void 0)return"";if(l===null)return o(c,t);if(Array.isArray(l)){if(l.length===0&&t.arrayFormat==="bracket-separator")return o(c,t)+"[]";let f=l;return t.replacer&&(f=l.map((m,x)=>t.replacer(`${c}[${x}]`,m)).filter(m=>m!==void 0)),f.reduce(n(c),[]).join("&")}return o(c,t)+"="+o(l,t)}).filter(c=>c.length>0).join("&")}function I(e,t){var a;t={decode:!0,...t};let[r,n]=A(e,"#");return r===void 0&&(r=e),{url:((a=r==null?void 0:r.split("?"))==null?void 0:a[0])??"",query:N(j(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:g(n,t)}:{}}}function v(e,t){t={encode:!0,strict:!0,[b]:!0,...t};const r=$(e.url).split("?")[0]||"",n=j(e.url),a={...N(n,{sort:!1,...t}),...e.query};let i=L(a,t);i&&(i=`?${i}`);let c=se(e.url);if(typeof e.fragmentIdentifier=="string"){const l=new URL(r);l.hash=e.fragmentIdentifier,c=t[b]?l.hash:`#${e.fragmentIdentifier}`}return`${r}${i}${c}`}function q(e,t,r){r={parseFragmentIdentifier:!0,[b]:!1,...r};const{url:n,query:a,fragmentIdentifier:i}=I(e,r);return v({url:n,query:ee(a,t),fragmentIdentifier:i},r)}function ie(e,t,r){const n=Array.isArray(t)?a=>!t.includes(a):(a,i)=>!t(a,i);return q(e,n,r)}const D=Object.freeze(Object.defineProperty({__proto__:null,exclude:ie,extract:j,parse:N,parseUrl:I,pick:q,stringify:L,stringifyUrl:v},Symbol.toStringTag,{value:"Module"})),ce=e=>D.stringify({query:e.query,category:e.category,occasion:e.occasion,minPrice:e.priceRange[0],maxPrice:e.priceRange[1],colors:e.colors.join(","),sizes:e.sizes.join(","),delivery:e.delivery.join(","),availability:e.availability.join(","),rating:e.rating,onSale:e.onSaleOnly?"true":void 0,tags:e.tags.join(","),sort:e.sort,page:e.page,perPage:e.perPage},{skipNull:!0,skipEmptyString:!0}),le=e=>{const t=D.parse(e),r=n=>typeof n=="string"&&n.length?n.split(",").filter(Boolean):Array.isArray(n)?n.filter(a=>typeof a=="string"&&a.length>0):[];return{...u,query:t.query??u.query,category:t.category??void 0,occasion:t.occasion??void 0,priceRange:[Number(t.minPrice??u.priceRange[0]),Number(t.maxPrice??u.priceRange[1])],colors:r(t.colors),sizes:r(t.sizes),delivery:r(t.delivery),availability:r(t.availability),rating:t.rating?Number(t.rating):u.rating,onSaleOnly:t.onSale==="true",tags:r(t.tags),sort:t.sort??u.sort,page:t.page?Number(t.page):u.page,perPage:t.perPage?Number(t.perPage):u.perPage}},O=U(e=>({filters:u,setFilters:t=>e(r=>({filters:{...r.filters,...t}})),resetFilters:()=>e({filters:u})})),oe=["blush","coral","white","lavender","yellow","plum","green","peach"],de=["Petite","Standard","Luxe"],ue=["same-day","next-day","pickup"],fe=["in-stock","out-of-stock"],me=["artisan-crafted","eco-friendly","local-delivery","premium","seasonal"],ge=({filters:e,onChange:t})=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Price range"}),s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"number",min:0,value:e.priceRange[0],onChange:r=>t({priceRange:[Number(r.target.value),e.priceRange[1]]}),className:"w-20 rounded-lg border px-2 py-1"}),s.jsx("span",{children:"to"}),s.jsx("input",{type:"number",value:e.priceRange[1],onChange:r=>t({priceRange:[e.priceRange[0],Number(r.target.value)]}),className:"w-20 rounded-lg border px-2 py-1"})]})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-ink",children:[s.jsx("input",{type:"checkbox",checked:e.onSaleOnly,onChange:r=>t({onSaleOnly:r.target.checked})}),"On sale only"]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Availability"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:fe.map(r=>s.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1",children:[s.jsx("input",{type:"checkbox",checked:e.availability.includes(r),onChange:n=>t({availability:n.target.checked?[...e.availability,r]:e.availability.filter(a=>a!==r)})}),r]},r))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Colors"}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs uppercase",children:oe.map(r=>s.jsx("button",{type:"button",onClick:()=>t({colors:e.colors.includes(r)?e.colors.filter(n=>n!==r):[...e.colors,r]}),className:`rounded-full border px-3 py-1 ${e.colors.includes(r)?"border-brand bg-brand-light text-brand-dark":"border-slate-200 text-ink/70"}`,children:r},r))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Size"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:de.map(r=>s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e.sizes.includes(r),onChange:n=>t({sizes:n.target.checked?[...e.sizes,r]:e.sizes.filter(a=>a!==r)})}),r]},r))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Tags"}),s.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:me.map(r=>s.jsx("button",{type:"button",onClick:()=>t({tags:e.tags.includes(r)?e.tags.filter(n=>n!==r):[...e.tags,r]}),className:`rounded-full border px-3 py-1 ${e.tags.includes(r)?"border-brand bg-brand-light text-brand-dark":"border-slate-200 text-ink/70"}`,children:r},r))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Delivery options"}),s.jsx("div",{className:"mt-2 flex flex-col gap-2 text-sm",children:ue.map(r=>s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e.delivery.includes(r),onChange:n=>t({delivery:n.target.checked?[...e.delivery,r]:e.delivery.filter(a=>a!==r)})}),r]},r))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-ink",children:"Minimum rating"}),s.jsx("input",{type:"range",min:0,max:5,step:.5,value:e.rating,onChange:r=>t({rating:Number(r.target.value)}),className:"mt-3 w-full"}),s.jsxs("p",{className:"text-xs text-ink/60",children:[e.rating,"+ stars"]})]})]}),xe=({filters:e,onChange:t})=>{const[r,n]=y.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"rounded-full border border-slate-200 px-3 py-1 text-sm",onClick:()=>n(!0),children:"Filters"}),s.jsx(B,{open:r,onClose:()=>n(!1),title:"Filters",children:s.jsx(ge,{filters:e,onChange:a=>{t(a)}})})]})},pe=[{value:"featured",label:"Featured"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"newest",label:"Newest"},{value:"best-rated",label:"Best rated"},{value:"popular",label:"Most popular"}],ye=({value:e,onChange:t})=>s.jsxs("label",{className:"text-sm text-ink",children:["Sort by",s.jsx("select",{className:"ml-2 rounded-full border border-slate-200 px-4 py-2",value:e,onChange:r=>t(r.target.value),children:pe.map(r=>s.jsx("option",{value:r.value,children:r.label},r.value))})]}),he=({page:e,totalPages:t,onPageChange:r})=>t<=1?null:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx(w,{variant:"secondary",disabled:e===1,onClick:()=>r(e-1),children:"Previous"}),s.jsxs("p",{className:"text-sm text-ink/70",children:["Page ",e," of ",t]}),s.jsx(w,{variant:"secondary",disabled:e===t,onClick:()=>r(e+1),children:"Next"})]}),be=()=>s.jsxs("div",{className:"rounded-3xl border border-brand/20 bg-brand-light/40 p-6",children:[s.jsx("p",{className:"text-sm uppercase tracking-[0.4em] text-brand",children:"Subscriptions"}),s.jsx("h3",{className:"mt-3 text-2xl font-semibold text-ink",children:"Save 10% on weekly floral plans"}),s.jsx("p",{className:"mt-2 text-sm text-ink/70",children:"Members receive complimentary vase refreshes, concierge support, and priority delivery windows."})]}),je=V,ke=()=>{const e=M(),t=e.categorySlug,r=e.occasionSlug,n=T(),a=H(),i=O(d=>d.filters),c=O(d=>d.setFilters);y.useEffect(()=>{const d=le(n.search);c({...u,...d,category:t??d.category,occasion:r??d.occasion})},[t,r,n.search,c]);const l=y.useMemo(()=>{const d=J(je,i);return G(d,i.sort)},[i]),f=W(l,i.page,i.perPage),m=Math.ceil(l.length/i.perPage)||1,x=d=>{const F={...i,...d};c(F);const z=ce(F);a({search:`?${z}`},{replace:!0})},p=[{label:"Home",href:"/"},{label:"Catalog",href:"/catalog"}];return t&&p.push({label:t.replace(/-/g," "),href:n.pathname}),r&&p.push({label:r.replace(/-/g," "),href:n.pathname}),s.jsxs("div",{className:"space-y-8",children:[s.jsx(Q,{title:`Shop ${(t??r??"catalog").replace(/-/g," ")}`}),s.jsx(K,{crumbs:p}),s.jsx("div",{className:"flex flex-col gap-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-semibold text-ink capitalize",children:(t??r??"All florals").replace(/-/g," ")}),s.jsxs("p",{className:"text-sm text-ink/60",children:[l.length," creations"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xe,{filters:i,onChange:x}),s.jsx(ye,{value:i.sort,onChange:d=>x({sort:d})})]})]}),s.jsx(be,{}),s.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:f.map(d=>s.jsx(_,{product:d},d.id))}),s.jsx(he,{page:i.page,totalPages:m,onPageChange:d=>x({page:d})})]})})]})};export{ke as CatalogPage};
